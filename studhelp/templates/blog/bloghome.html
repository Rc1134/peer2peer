{% extends "home/base.html" %}
{% block title %}Blog Home{% endblock title %}

{% block body %}
<div class="container">
  <div class="my-3">
    <p class="h3">Discuss here:</p>
  </div>
  <form method="post" action="">
    {% csrf_token %}
    {{ form.media }}
    <div class="mb-3">
      <label for="{{ form.title.id_for_label }}" class="form-label">
        <p class="display-5">Title:</p>
      </label>
      {{ form.title }}
    </div>
    <div class="mb-3">
      <label for="{{ form.content.id_for_label }}" class="form-label">
        <p class="display-5">Content:</p>
      </label>
      {{ form.content }}
    </div>
    {% if user.is_authenticated %}
      <button class="btn btn-outline-success my-2 my-sm-0 center" type="submit">Add</button>
    {% else %}
      <a href="/login" class="btn btn-outline-success my-2 my-sm-2">Login to add</a>
    {% endif %}
  </form>
</div>
<div class="p-3 mb-2 bg-light text-dark">
  <div class="container text-center my-5">
    <p class="h3">Read latest discussions and news.</p>
  </div>
  {% for post in allPosts %}
    <div class="container">
      <div class="col-md-11">
        <div class="row g-0 border rounded overflow-hidden flex-md-row mb-4 shadow-sm h-md-250 position-relative">
          <div class="col p-4 d-flex flex-column position-static">
            <strong class="d-inline-block mb-2 text-light-emphasis">Article by {{ post.author }}</strong>
            <h3 class="mb-0">{{ post.title }}</h3>
            <div class="mb-0 text-body-secondary">{{ post.timeStamp }}</div>
            <!-- Display truncated post content -->
            <p class="card-text mb-auto">{{ post.content|truncatechars_html:500|safe }}</p>
            <a href="/blog/{{ post.slug }}" class="icon-link gap-1 icon-link-hover stretched-link">Continue reading</a>
          </div>
        </div>
      </div>
    </div>
  {% endfor %}
</div>
{% endblock body %}
